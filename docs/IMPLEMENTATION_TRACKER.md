# Implementation Tracker

This tracker is the canonical machine-readable queue for next-step agent execution.

| ID | Phase | Priority | Status | Modules | Goal | Acceptance | AgentPrompt |
| --- | --- | --- | --- | --- | --- | --- | --- |
| P1-001 | Phase 1 | P1 | DONE | webauthn-server-core-jvm,webauthn-core | Enforce strict Related Origins opt-in in finish flows. | Registration and authentication accept related origins only when extension was explicitly requested. | Implement strict Related Origins opt-in in server finish flows and add negative plus positive tests for both ceremonies. |
| P1-002 | Phase 1 | P1 | DONE | webauthn-serialization-kotlinx,webauthn-server-ktor | Make extension DTO parsing validation-based and 400-safe in routes. | Invalid extension payloads return ValidationResult.Invalid and route start handlers return HTTP 400. | Add validated extension mapping APIs in WebAuthnDtoMapper, route-level handling, and test invalid payload behavior. |
| P1-003 | Phase 1 | P2 | DONE | webauthn-core | Complete PRF extension missing-output validation logic. | Registration fails when PRF output is missing and authentication fails when PRF results are missing. | Tighten WebAuthnExtensionValidator PRF checks and extend tests for missing output cases. |
| P1-004 | Phase 1 | P2 | DONE | webauthn-server-jvm-crypto | Enable deterministic FIDO U2F verifier coverage with fixtures. | Happy-path and core negative-path tests execute without Ignore annotations. | Replace ignored U2F test with fixture-based cert and key resources and add negative cases. |
| P1-005 | Phase 1 | P2 | DONE | docs,spec-notes,tools/agent | Align steering, roadmap, implementation status, and spec map with implemented semantics and tracker workflow. | Strict changed-scope quality gate passes with trace docs updated and next-step workflow documented. | Update STEERING, WORKFLOWS, IMPLEMENTATION_STATUS, ROADMAP, and spec validation map to reflect implemented extension and attestation behavior, then run strict changed-scope quality gate. |
| P2-001 | Phase 2 | P2 | DONE | webauthn-server-core-jvm,webauthn-server-ktor | Add persistence-backed race and replay integration scenarios beyond in-memory smoke tests. | Deterministic tests cover store-backed replay and concurrent finish behavior. | Implement integration-level persistence race tests for registration and authentication finish flows and map new guarantees into status docs. |
| P3-001 | Phase 3 | P3 | IN_PROGRESS | webauthn-client-android,webauthn-client-ios,webauthn-client-core | Harden platform runtime edge handling for lifecycle and error propagation. | Android and iOS adapters map cancellation/platform failures consistently and reject malformed option inputs deterministically. | Keep platform error mapping deterministic and extend lifecycle/error-path tests while response parsing remains pending. |
| P2-002 | Phase 2 | P2 | DONE | webauthn-server-jvm-crypto | Harden Android Key Attestation verification logic. | Verifier strictly checks key purpose, algorithm, size, digests, and origin. | Implement strict checks in AndroidKeyAttestationStatementVerifier and verify with comprehensive tests. |
| P1-006 | Phase 1 | P1 | DONE | webauthn-serialization-kotlinx,webauthn-server-jvm-crypto | Expand CBOR/COSE conformance vectors for malformed and unsupported inputs. | Deterministic vector tests cover malformed CBOR maps, unsupported COSE key shapes, and strict rejection behavior. | Add deterministic CBOR/COSE conformance vectors in serialization and JVM crypto modules, then tighten rejection assertions for malformed inputs. |
| P2-003 | Phase 2 | P2 | TODO | webauthn-server-core-jvm,webauthn-server-ktor | Add external-store contract testing beyond in-memory stores. | At least one non-in-memory store adapter passes replay/race invariants for registration and authentication finish flows. | Build store-contract tests that run the existing race/replay scenarios against a non-in-memory store implementation and document guarantees. |
| P3-002 | Phase 3 | P1 | TODO | webauthn-client-android,webauthn-client-ios | Implement platform response parsing and success-path propagation. | Android and iOS clients return PasskeyResult.Success for valid platform payloads and return deterministic parse errors for malformed payloads. | Implement response payload parsing in Android/iOS adapters, add success-path tests with fixture payloads, and keep cancellation/platform error mapping intact. |
